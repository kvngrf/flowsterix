{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "tour-controls",
  "type": "registry:component",
  "title": "Tour Controls",
  "description": "Navigation buttons (Back, Next, Skip) with proper state management via useTourControls hook.",
  "dependencies": [
    "@flowsterix/react",
    "motion"
  ],
  "registryDependencies": [
    "https://flowsterix.com/r/tour-provider.json",
    "button"
  ],
  "files": [
    {
      "path": "registry/flowsterix/tour-controls.tsx",
      "content": "'use client'\n\nimport {\n  useHudMotion,\n  useTour,\n  useTourControls,\n  useTourLabels,\n} from '@flowsterix/react'\nimport { AnimatePresence, motion } from 'motion/react'\n\nimport { Button } from '@/components/ui/button'\nimport { cn } from '@/lib/utils'\n\nimport { HoldToSkipButton } from '@/registry/flowsterix/hold-to-skip-button'\n\nexport interface TourControlsProps {\n  /** Additional class names for the controls container */\n  className?: string\n  /** Whether to show the skip button (default: true) */\n  showSkip?: boolean\n  /** Skip button mode: 'click' for instant skip, 'hold' for hold-to-confirm (default: 'click') */\n  skipMode?: 'click' | 'hold'\n  /** Duration in ms to hold skip button when skipMode is 'hold' (default: 1000) */\n  skipHoldDurationMs?: number\n  /** Custom labels for buttons (overrides provider labels) */\n  labels?: {\n    back?: string\n    next?: string\n    finish?: string\n    skip?: string\n    holdToConfirm?: string\n  }\n  /** Button variant for primary action */\n  primaryVariant?: 'default' | 'secondary' | 'outline' | 'ghost'\n  /** Button variant for secondary actions */\n  secondaryVariant?: 'default' | 'secondary' | 'outline' | 'ghost'\n}\n\nexport function TourControls({\n  className,\n  showSkip = true,\n  skipMode = 'click',\n  skipHoldDurationMs = 1000,\n  labels: labelOverrides,\n  primaryVariant = 'default',\n  secondaryVariant = 'outline',\n}: TourControlsProps) {\n  const { transitions } = useHudMotion()\n  const { popoverContent: popoverContentTransition } = transitions\n  const { cancel } = useTour()\n  const providerLabels = useTourLabels()\n  const labels = { ...providerLabels, ...labelOverrides }\n  const {\n    showBackButton,\n    backDisabled,\n    showNextButton,\n    nextDisabled,\n    isLast,\n    isActive,\n    goBack,\n    goNext,\n  } = useTourControls()\n\n  if (!isActive) {\n    return null\n  }\n\n  return (\n    <motion.div\n      layout=\"position\"\n      className={cn('flex items-center justify-between gap-2 p-4', className)}\n      data-tour-controls=\"\"\n      transition={{ layout: { duration: 0.2, ease: 'easeOut', type: 'tween' } }}\n    >\n      <motion.div\n        className=\"flex items-center gap-2\"\n        layout=\"position\"\n        transition={{\n          layout: { duration: 0.2, ease: 'easeOut', type: 'tween' },\n        }}\n      >\n        <AnimatePresence mode=\"popLayout\" initial={false}>\n          {showBackButton && (\n            <motion.div\n              key=\"tour-control-back\"\n              initial={{ opacity: 0, y: 4 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -4 }}\n              transition={popoverContentTransition}\n              layout=\"position\"\n            >\n              <Button\n                asChild\n                variant={secondaryVariant}\n                size=\"sm\"\n                onClick={goBack}\n                disabled={backDisabled}\n                data-tour-button=\"back\"\n              >\n                <motion.button\n                  layout=\"position\"\n                  layoutId=\"tour-control-back\"\n                  transition={{\n                    layout: { duration: 0.2, ease: 'easeOut', type: 'tween' },\n                  }}\n                >\n                  <span>{labels.back}</span>\n                </motion.button>\n              </Button>\n            </motion.div>\n          )}\n          {showSkip && skipMode === 'hold' && (\n            <motion.div\n              key=\"tour-control-skip-hold\"\n              initial={{ opacity: 0, y: 4 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -4 }}\n              transition={popoverContentTransition}\n              layout=\"position\"\n            >\n              <HoldToSkipButton\n                label={labels.skip}\n                tooltipText={labels.holdToConfirm}\n                holdDurationMs={skipHoldDurationMs}\n                onConfirm={() => cancel('skipped')}\n              />\n            </motion.div>\n          )}\n          {showSkip && skipMode === 'click' && (\n            <motion.div\n              key=\"tour-control-skip-click\"\n              initial={{ opacity: 0, y: 4 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -4 }}\n              transition={popoverContentTransition}\n              layout=\"position\"\n            >\n              <Button\n                asChild\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => cancel('skipped')}\n                data-tour-button=\"skip\"\n              >\n                <motion.button\n                  layout=\"position\"\n                  transition={{\n                    layout: { duration: 0.2, ease: 'easeOut', type: 'tween' },\n                  }}\n                >\n                  {labels.skip}\n                </motion.button>\n              </Button>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </motion.div>\n\n      <AnimatePresence initial={false}>\n        {showNextButton && (\n          <motion.div\n            key=\"tour-control-primary\"\n            initial={{ opacity: 0, y: 4 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -4 }}\n            transition={popoverContentTransition}\n            layout=\"position\"\n          >\n            <Button\n              asChild\n              variant={primaryVariant}\n              size=\"sm\"\n              onClick={goNext}\n              disabled={nextDisabled}\n              data-tour-button={isLast ? 'finish' : 'next'}\n            >\n              <motion.button\n                layout=\"position\"\n                layoutId=\"tour-control-primary\"\n                transition={{\n                  layout: { duration: 0.2, ease: 'easeOut', type: 'tween' },\n                }}\n              >\n                {isLast ? labels.finish : labels.next}\n              </motion.button>\n            </Button>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </motion.div>\n  )\n}\n",
      "type": "registry:component"
    },
    {
      "path": "registry/flowsterix/hold-to-skip-button.tsx",
      "content": "'use client'\n\nimport { useTourLabels } from '@flowsterix/react'\nimport type { Variants } from 'motion/react'\nimport { motion } from 'motion/react'\nimport type { KeyboardEventHandler } from 'react'\nimport { useEffect, useMemo, useRef } from 'react'\n\nimport { Button } from '@/components/ui/button'\nimport { cn } from '@/lib/utils'\n\nexport interface HoldToSkipButtonProps {\n  /** Button label text (overrides provider labels) */\n  label?: string\n  /** Duration in ms to hold before confirming (default: 1000) */\n  holdDurationMs?: number\n  /** Callback when hold is completed */\n  onConfirm: () => void\n  /** Tooltip text shown while holding (overrides provider labels) */\n  tooltipText?: string\n  /** Additional class names */\n  className?: string\n}\n\nexport function HoldToSkipButton({\n  label,\n  holdDurationMs = 1000,\n  onConfirm,\n  tooltipText,\n  className,\n}: HoldToSkipButtonProps) {\n  const labels = useTourLabels()\n  const resolvedLabel = label ?? labels.skip\n  const resolvedTooltipText = tooltipText ?? labels.holdToConfirm\n  const holdTimeoutRef = useRef<number | null>(null)\n  const holdReadyRef = useRef(false)\n\n  const progressVariants = useMemo<Variants>(\n    () => ({\n      holding: {\n        clipPath: 'inset(0% 0% 0% 100%)',\n        transition: { duration: holdDurationMs / 1000, ease: 'linear' },\n      },\n      idle: {\n        clipPath: 'inset(0% 0% 0% 0%)',\n        transition: { duration: 0.3, ease: 'easeOut' },\n      },\n    }),\n    [holdDurationMs],\n  )\n\n  const tooltipVariants = useMemo<Variants>(\n    () => ({\n      holding: {\n        opacity: 1,\n        filter: 'blur(0px)',\n        y: 0,\n        transition: { duration: 0.2, ease: 'easeOut' },\n      },\n      idle: {\n        opacity: 0,\n        filter: 'blur(2px)',\n        y: 8,\n        transition: { duration: 0.3, ease: 'easeOut' },\n      },\n    }),\n    [],\n  )\n\n  const clearHoldTimeout = () => {\n    if (holdTimeoutRef.current !== null) {\n      clearTimeout(holdTimeoutRef.current)\n      holdTimeoutRef.current = null\n    }\n  }\n\n  const resetHoldState = () => {\n    holdReadyRef.current = false\n    clearHoldTimeout()\n  }\n\n  const startHold = () => {\n    resetHoldState()\n    holdTimeoutRef.current = window.setTimeout(() => {\n      holdTimeoutRef.current = null\n      holdReadyRef.current = true\n    }, holdDurationMs)\n  }\n\n  const completeHold = () => {\n    const shouldConfirm = holdReadyRef.current\n    resetHoldState()\n    if (shouldConfirm) {\n      onConfirm()\n    }\n  }\n\n  const handleKeyDown: KeyboardEventHandler<HTMLButtonElement> = (event) => {\n    if (event.key !== 'Enter' && event.key !== ' ') return\n    if (event.repeat) return\n    event.preventDefault()\n    startHold()\n  }\n\n  const handleKeyUp: KeyboardEventHandler<HTMLButtonElement> = (event) => {\n    if (event.key !== 'Enter' && event.key !== ' ') return\n    event.preventDefault()\n    completeHold()\n  }\n\n  useEffect(() => {\n    return () => {\n      resetHoldState()\n    }\n  }, [])\n\n  return (\n    <Button\n      asChild\n      variant=\"ghost\"\n      size=\"sm\"\n      className={cn(\n        'relative cursor-pointer select-none',\n        'focus-visible:ring-ring/50 focus-visible:ring-[3px]',\n        className,\n      )}\n      data-tour-button=\"skip\"\n    >\n      <motion.button\n        type=\"button\"\n        layout=\"position\"\n        transition={{\n          layout: { duration: 0.2, ease: 'easeOut', type: 'tween' },\n        }}\n        whileTap=\"holding\"\n        initial=\"idle\"\n        animate=\"idle\"\n        onPointerDown={startHold}\n        onPointerUp={completeHold}\n        onPointerLeave={resetHoldState}\n        onPointerCancel={resetHoldState}\n        onKeyDown={handleKeyDown}\n        onKeyUp={handleKeyUp}\n        onBlur={resetHoldState}\n      >\n        <span aria-hidden=\"true\">{resolvedLabel}</span>\n        <motion.div\n          variants={tooltipVariants}\n          className={cn(\n            'pointer-events-none absolute -top-2 left-1/2 min-w-max -translate-x-1/2 -translate-y-full',\n            'rounded-md bg-popover px-2 py-1 text-xs text-popover-foreground shadow-md',\n            'border border-border',\n          )}\n        >\n          {resolvedTooltipText}\n          <div className=\"absolute -bottom-1 left-1/2 -z-10 size-2 -translate-x-1/2 rotate-45 border-b border-r border-border bg-popover\" />\n        </motion.div>\n\n        <div className=\"absolute inset-0 overflow-hidden rounded-[inherit]\">\n          <motion.div\n            className={cn(\n              'absolute inset-0 flex shrink-0 items-center justify-center',\n              'bg-destructive text-background',\n            )}\n          >\n            {resolvedLabel}\n          </motion.div>\n\n          <motion.div\n            variants={progressVariants}\n            className={cn(\n              'absolute inset-0 flex shrink-0 items-center justify-center',\n              'bg-background text-foreground',\n              'hover:bg-accent hover:text-accent-foreground',\n            )}\n          >\n            {resolvedLabel}\n          </motion.div>\n        </div>\n        <div className=\"pointer-events-none absolute inset-0 rounded-[inherit] border border-input\" />\n      </motion.button>\n    </Button>\n  )\n}\n",
      "type": "registry:component"
    }
  ],
  "categories": [
    "tour",
    "controls"
  ]
}